# LL(1)语法分析程序使用说明

## 项目概述

本项目实现了一个LL(1)预测分析程序，可以分析简单算术表达式的语法结构。程序提供了两种使用方式：命令行界面和PyQt6图形界面。

## 环境要求

- Python 3.x
- PyQt6 (仅GUI版本需要)

## 文件说明

- `ll1_parser.py`: LL(1)分析器核心程序
- `visualize_ll1_qt.py`: 基于PyQt6的图形界面程序
- `requirements.txt`: 项目依赖文件
- `README.md`: 项目说明文档
- `使用说明.md`: 详细使用指南(本文档)

## 实现的文法

程序实现了以下文法的语法分析：

```
E -> TG
G -> +TG | -TG | ε
T -> FS
S -> *FS | /FS | ε
F -> (E) | i
```

此文法可以处理包含加减乘除和括号的简单算术表达式。

## 安装步骤

1. 确保已安装Python 3.x
2. 安装依赖：
   ```
   pip install -r requirements.txt
   ```

## 使用方法

### 命令行模式

1. 运行命令行版本：
   ```
   python ll1_parser.py
   ```
2. 按照提示输入表达式，例如：`i+i*i`
3. 程序将显示分析过程和结果
4. 输入`q`退出程序

### GUI模式

1. 运行图形界面版本：
   ```
   python visualize_ll1_qt.py
   ```
2. 程序启动后会显示两个窗口：
   - 主窗口：包含文法规则、输入区和分析结果区
   - First集和Follow集窗口：显示计算得到的First集、Follow集和分析表
3. 在输入框中输入表达式，点击"分析"按钮
4. 分析结果将在表格中显示，状态栏显示分析是否成功

## 测试样例

以下是一些可用于测试的表达式样例：

### 有效表达式

1. `i`
   - 单个标识符，最简单的表达式
2. `i+i`
   - 简单的加法表达式
3. `i*i`
   - 简单的乘法表达式
4. `i+i*i`
   - 混合加法和乘法，测试运算符优先级
5. `i*(i+i)`
   - 带括号的表达式，测试括号处理
6. `(i+i)*(i-i)`
   - 复杂表达式，测试多个括号和多种运算符

### 无效表达式

1. `i+`
   - 不完整的表达式，缺少右操作数
2. `+i`
   - 不符合文法的表达式，不能以运算符开始
3. `i)`
   - 括号不匹配
4. `((i)`
   - 括号不匹配
5. `i**i`
   - 连续的运算符，不符合文法规则

## 分析结果说明

分析过程中，程序会显示以下信息：

- **步骤**：分析的步骤序号，从0开始递增
- **分析栈**：当前的分析栈内容，显示栈中所有符号，栈顶符号在最右边
- **剩余输入串**：尚未被分析的输入符号，随着分析过程逐步减少
  - 在分析开始时，它包含完整的输入表达式加上结束符号`#`
  - 在每一步匹配成功后，已匹配的符号会从剩余输入串中移除
  - 当只剩下`#`符号时，表示所有输入都已处理完成
- **所用产生式**：当前步骤使用的文法产生式或匹配操作
  - 如果栈顶是非终结符，显示使用的产生式，如`E -> TG`
  - 如果栈顶是终结符，显示匹配的符号，如`匹配 i`
- **动作**：当前步骤执行的动作
  - `POP`：从栈顶弹出一个符号
  - `PUSH(...)`：将产生式右部的符号按从右到左的顺序压入栈中
  - `初始化`：分析过程的初始状态
  - `成功`：分析成功完成

### 剩余输入串详解

"剩余输入串"是LL(1)分析过程中的关键信息，它表示从当前位置到输入末尾的所有未处理符号。例如，对于输入表达式`i+i*i`：

1. 分析开始时，剩余输入串为`i+i*i#`
2. 当第一个`i`被识别后，剩余输入串变为`+i*i#`
3. 当`+`被识别后，剩余输入串变为`i*i#`
4. 依此类推，直到所有符号都被处理完毕

通过观察剩余输入串的变化，可以清楚地看到分析器是如何一步步处理输入表达式的。

## 常见问题解答

1. **Q: 为什么输入`i+i+i`会分析成功，但输入`i++i`会失败？**
   
   A: 根据文法规则，`+`后必须跟随一个项（T），而不能是另一个运算符。

2. **Q: 为什么程序不计算表达式的值？**
   
   A: 本程序仅实现语法分析功能，不包含语义分析和代码生成，因此不计算表达式的值。

3. **Q: 如何查看First集和Follow集？**
   
   A: 在GUI模式下，程序启动时会自动显示一个包含First集、Follow集和分析表的窗口。

4. **Q: 表格中的"剩余输入串"列为什么显示不全或没有内容？**
   
   A: 这可能是界面显示问题。最新版本已经修复了这个问题，如果仍然存在，可以尝试手动调整表格列宽，或者使用最新版本的程序。

## 注意事项

- 输入表达式中，每个字符都被视为一个独立的符号
- `i`表示标识符或数字，在输入时直接使用字母i
- 空格会被忽略，可以使用空格提高表达式的可读性 