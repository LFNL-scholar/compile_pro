# 逆波兰表达式的产生及计算

这个项目实现了将中缀表达式转换为逆波兰表达式（后缀表达式），并计算逆波兰表达式的值。

## 项目介绍

逆波兰表达式是一种将运算符放在操作数之后的表达式，例如"3 4 +"表示"3 + 4"。该表达式的特点是不需要括号，且可以直接通过栈来求值，非常适合计算机处理。

本项目主要包含以下功能：
1. 将中缀表达式转换为后缀表达式（逆波兰表达式）
2. 计算后缀表达式的值
3. 支持变量赋值
4. 可视化转换和计算过程

## 环境要求

- Python 3.6 或以上版本
- PyQt6 (GUI界面)

## 文件结构

- `infix_to_postfix.py`: 中缀表达式转后缀表达式的实现
- `postfix_calculator.py`: 后缀表达式计算器的实现
- `debug_process.py`: 调试过程跟踪工具
- `main.py`: 命令行界面程序
- `gui.py`: 图形用户界面程序
- `README.md`: 项目说明文档
- `requirements.txt`: 项目依赖

## 安装依赖

```bash
pip install -r requirements.txt
```

## 使用方法

### 命令行界面

```bash
python main.py
```

### 图形用户界面

```bash
python gui.py
```

## GUI界面说明

GUI界面提供了三个选项卡：

1. **表达式转换**：将中缀表达式转换为后缀表达式。
2. **表达式计算**：将中缀表达式转换为后缀表达式并计算结果，支持变量赋值。
3. **步骤调试**：详细显示中缀转后缀和后缀计算的每一步过程，帮助理解算法。

### 表达式转换选项卡

- 输入中缀表达式
- 点击"转换"按钮
- 查看转换结果

### 表达式计算选项卡

- 输入中缀表达式
- 点击"转换"按钮转换为后缀表达式
- 输入变量的值
- 点击"计算"按钮计算表达式的值
- 点击"清除"按钮重置所有输入

### 步骤调试选项卡

- 输入中缀表达式
- 输入变量赋值（可选，格式如：a=2;b=3;c=4;d=5）
- 点击"调试"按钮
- 查看中缀转后缀的详细步骤表格
- 查看后缀表达式计算的详细步骤表格
- 查看最终计算结果

## 命令行功能选项

程序提供以下功能：
1. 中缀表达式转后缀表达式
2. 中缀表达式转后缀表达式并计算结果
3. 详细显示中缀转后缀的过程
4. 详细显示后缀表达式的计算过程
5. 退出程序

## 使用示例

### 示例1：简单表达式转换

输入：`(a+b)#`
输出：`ab+`

### 示例2：复杂表达式计算

输入表达式：`a*(b+c)+(-d)#`
转换后的后缀表达式：`abc+*d@+`
变量赋值：`a=3; b=1; c=2; d=5;`
计算结果：`4`

### 示例3：带括号的表达式计算

输入表达式：`(a+b*c)*d#`
转换后的后缀表达式：`abc*+d*`
变量赋值：`a=2; b=3; c=4; d=5;`
计算结果：`70`

## 算法说明

### 中缀转后缀算法

1. 构造一个运算符栈，运算符在栈内遵循越往栈顶优先级越高的原则。
2. 从左至右扫描中缀表达式：
   - 如果是操作数，直接输出
   - 如果是左括号，入栈
   - 如果是右括号，弹出栈中元素直到遇到左括号，左括号出栈但不输出
   - 如果是运算符，将该运算符与栈顶运算符比较优先级，如果高于栈顶，则入栈；否则将栈顶元素弹出并输出，然后继续比较
3. 扫描完毕后，将栈中剩余运算符依次弹出并输出

### 后缀表达式计算算法

1. 构造一个操作数栈
2. 从左至右扫描后缀表达式：
   - 如果是操作数，入栈
   - 如果是运算符，弹出栈顶的一个或两个元素，进行运算，然后将结果入栈
3. 扫描完毕后，栈顶元素即为计算结果

## 实验总结

通过本项目，我们实现了中缀表达式到后缀表达式的转换以及后缀表达式的计算。这个实现可以帮助我们更好地理解逆波兰表达式的原理和栈在表达式处理中的应用。

### 特点
- 支持变量和数字混合计算
- 良好的错误处理
- 清晰的用户界面（命令行和图形界面）
- 详细的计算过程展示和步骤调试

### 不足
- 目前仅支持基本的四则运算
- 负数表示需要使用括号，如 (-a)

### 改进方向
- 添加更多运算符支持，如幂运算、取模等
- 增强错误提示信息
- 美化图形用户界面 